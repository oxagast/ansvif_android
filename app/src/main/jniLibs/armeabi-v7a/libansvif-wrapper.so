#!/system/bin/sh
echo Checking for ansvif dir...
if [ ! -d /sdcard/ansvif ]
then
mkdir /sdcard/ansvif
fi
echo Checking to see if ansvif examples are loaded...
if [ ! -r /sdcard/ansvif/ansvif_examples.tar.gz ]
then
echo Downloading templates...
curl -L https://github.com/oxagast/ansvif/raw/gh-pages/ansvif_examples.tar.gz > /sdcard/ansvif/ansvif_examples.tar.gz
echo Downloaded...
fi
if [ ! -r /sdcard/ansvif/examples/specific/mount_t.txt ]
then
echo Unpacking templates...
gzip -d /sdcard/ansvif/ansvif_examples.tar.gz
tar -xvf /sdcard/ansvif/ansvif_examples.tar /sdcard/ansvif/
fi
#export LOCDIR=/data/local/tmp
export LOCDIR=/data/data/site.maskster.oxagast.ansvif/lib
#/data/data/site.maskster.oxagast.ansvif/lib/libansvif.so "$@" > /sdcard/output
export LD_LIBRARY_PATH=$LOCDIR
$LOCDIR/ansvif "$@" > /sdcard/output
#$LOCDIR/libansvif.so -c /data/local/tmp/testcrash -b 32 -t /sdcard/ansvif/examples/specific/flag_chars.txt > /sdcard/output

pwd